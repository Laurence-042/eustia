<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Test</title>
    <script src="testUtil.js"></script>
</head>
<body>
<script>
    // _.Cookies.set('eustia', 'liriliri', { expires: 5 });
    // _.Cookies.remove('eustia');
    // console.log(typeof _.Cookies.get('eustia'));
    var Animal = new _.Class({
        initialize: function (name)
        {
            console.log('Animal constructor is called.');
            this.name = name;
        },
        speak: function (things)
        {
            return 'My name is ' + this.name + ' and I like ' + things;
        }
    });

    var nemo = new Animal('Nemo');
    console.log(nemo.speak('swimming'));

    var Dog = Animal.extend({
        huntForBones: function (garden)
        {
            // ...
        }
    }).methods({
        speak: function (stuff)
        {
            return this.callSuper('speak', stuff).toUpperCase() + '!';
        }
    });

    var rex = new Dog('Rex');
    console.log(rex.speak('barking'));

    _.define('test', function ()
    {
        return 'eustia';
    });
    _.use(['test'], function (test)
    {
        console.log(test);
    });

    var emitter = {};

    _.Emitter.mixin(emitter);

    emitter.on('test', function (val)
    {
        console.log('emitter test: ' + val);
    });

    emitter.once('testOnce', function ()
    {
        console.log('emitter test once');
    });

    emitter.emit('test', 'eustia');
    emitter.emit('testOnce');
    emitter.emit('testOnce');

    var state = new _.State('unloaded', {
        load: {
            from: 'unloaded',
            to: 'loaded'
        }
    });
    state.on('load', function ()
    {
        console.log('Current state is: ' + state.current);
    });
    state.load();
</script>
</body>
</html>